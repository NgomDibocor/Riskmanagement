<aura:component extends="c:ormAbstractListCmp" controller="OrmRiskController">
    <aura:registerEvent name="OrmOpenNewRiskCmpEvt"
		type="c:OrmOpenNewRiskCmpEvt" description="" />
	<aura:handler event="c:OrmRiskCreatedEvt" action="{!c.doInit}" />
    <aura:handler name="init" value="{! this }" action="{! c.doInit }"/>
    <aura:attribute name="allRisk" type="Macro[]" />
    <aura:attribute name="Research" type="String" />
    <aura:attribute name="allCategorieRisk" type="String[]" />
    <aura:attribute name="risk" type="Macro" default="{ 
                                                             'sobjectType' : 'Macro',
                                                             'Name' : '',
                                                             'Description' : '',
                                                      		 'orm_assessment__c': '',
                                                             'orm_categorieRisk__c' : ''
                                                         }" />
    
     <div class="slds-grid slds-gutters">
	    <div class=" slds-size--4-of-12   slds-p-horizontal--small slds-float—left">
			<div class="slds-form-element__control">
											<lightning:select aura:id="categorieRisk" name="categorie Risk" label="categorie Risk" onchange="{!c.filterByPicklist}" >
                                                <aura:iteration items="{!v.allCategorieRisk}" var="CategorieRisk" >
                                                    <option  text="{!CategorieRisk}" ></option>
                                                </aura:iteration>
                                            </lightning:select>
			</div>
		</div>
		<div class=" slds-size--4-of-12   slds-p-horizontal--small slds-float—left">
			<lightning:input aura:id="Name" type="search" label="{!$Label.c.search_button_title}" name="search"  onkeyup="{!c.openFilterRisk}"/>
		</div>
		<div class=" slds-size--2-of-12   slds-p-horizontal--small slds-float—left">
		<br/>
			<span class="btnNewRisk" onclick="{!c.openModalNewRisk}"><lightning:icon iconName="utility:new" size="medium" /></span>
		</div>
		<div class=" slds-size--2-of-12   slds-p-horizontal--small slds-float—left">
		</div>	
	 </div> <br/><br/>                                 
  <div class="slds-grid slds-gutters">
    <div class="slds-col slds-size_10-of-12">
        <!--
         <ui:inputSelect aura:id="organisation" change="{!c.onChangeOrg}" class="slds-select"
                              labelClass="slds-form-element__label">
            <aura:iteration items="{!v.allRisk}" var="risk">
                <ui:inputSelectOption text="{!risk.Id}" label="{!risk.Name}" />
             </aura:iteration>
       </ui:inputSelect><br/>
        -->
       <!-- test -->
  <table
			class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered slds-table_striped">
			<thead>
				<tr class="slds-text-title_caps">

					
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="{!$Label.c.orm_name_risk}">{!$Label.c.orm_name_risk}</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="{!$Label.c.orm_description_risk}">{!$Label.c.orm_description_risk}</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="{!$Label.c.orm_risk_category}">{!$Label.c.orm_risk_category}</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Actions">Actions</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<aura:iteration items="{!v.allRisk}" var="risk" indexVar="i">
					<tr>
						
						
						<td data-label="NameRisk">
							<div class="slds-truncate" title="{!risk.Name}">
								<ui:outputText value="{!risk.Name}" />
							</div>
						</td>
						<td data-label="Description">
							<div class="slds-truncate" title="{!risk.Description}">
								<ui:outputTextArea value="{!risk.Description}" />
							</div>
						</td>
						<td data-label="categorie Risk">
							<div class="slds-truncate" title="{!risk.orm_categorieRisk__c}">
								<ui:outputText value="{!risk.orm_categorieRisk__c}" />
							</div>
						</td>
						
						<td data-label="Action">
							<center><input type="checkbox" name="options" id="checkbox-2" value="checkbox-2" onclick="{!c.OpenPopupAssociation}"/></center>
						</td>
					</tr>
				</aura:iteration>
			</tbody>
			
		</table>
  <!-- fin test -->
     </div>   
  </div><br/>
  
    <c:OrmRiskNewCmp/>
</aura:component>